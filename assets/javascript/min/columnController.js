define(["zepto","TweenLite","CSSPlugin","EasePack","Draggable","ThrowPropsPlugin"],function($){this.appNS=this.appNS||{};var t=function(t,e){console.log("[ColumnController] CONSTRUCT"),this._$column=t,this._xPos=e,this._init()};return t.prototype={isActive:!1,_id:null,_type:null,_$draggable:null,_$column:null,_posStartY:0,_posMax:0,_xPos:0,_imgHeight:0,_imgMargin:0,_$images:null,_totalImages:0,_draggable:null,_init:function(){console.log("[ColumnController] INIT"),this._addEventListeners(),this._setPosition(),this._setVaraiables(),this._createDraggable(),this.render()},_addEventListeners:function(){$(window).on("resize",{self:this},this._onResize)},_setPosition:function(){TweenLite.set(this._$column,{left:this._xPos})},_setVaraiables:function(){if(this._$draggable=this._$column.find(".draggable"),this._id=this._$draggable.attr("id"),this._posMax=Math.round(parseFloat(this._$column.css("height"))),this._$images=this._$column.find(".work_image"),this._totalImages=this._$images.length,this._type="text",console.log("[ColumnController] TOTAL IMAGES:",this._totalImages),this._totalImages>0){this._type="images";var t=this._$images.first();this._imgHeight=Math.round(parseFloat(t.css("height"))),this._imgMargin=Math.round(parseFloat(t.css("margin-bottom"))),this._posMax-=this._imgHeight+this._imgMargin,console.log("[ColumnController] IMG HEIGHT:",this._imgHeight),console.log("[ColumnController] IMG MARGIN:",this._imgMargin),this._$column.find(".work_detail").css("max-width",this._imgHeight)}console.log("[ColumnController] MAX POS:",this._posMax)},_createDraggable:function(){console.log("[ColumnController] CREATE DRAGGABLE:",this._id);var t=Draggable.create("#"+this._id,{type:"y",edgeResistance:.75,throwProps:!0,lockAxis:!0,bounds:{maxX:0,minX:0,maxY:0,minY:-this._posMax},dragClickables:!0,trigger:"body"});this._draggable=Draggable.get("#"+this._id),this._draggable.disable()},_updateDraggable:function(){this._draggable&&(this._setVaraiables(),this._draggable.update(),this._draggable.applyBounds({maxX:0,minX:0,maxY:0,minY:-this._posMax}))},_onResize:function(t){var e=t.data.self;e._updateDraggable()},_onMouseScroll:function(t){var e=t.data.self;if(e._draggable){var i;t.deltaY?i=t.deltaY:t.wheelDelta?i=t.wheelDelta:t.detail&&(i=-t.detail),isNaN(i)&&(i=0);var s=e._draggable.y;s-=2*i,s<0-e._posMax&&(s=0-e._posMax),s>0&&(s=0),TweenLite.to("#"+e._id,.5,{y:s,ease:Sine.easeOut,onUpdate:e._draggable.update})}},enable:function(){this._draggable&&(console.log("[ColumnController] ENABLE DRAGGABLE:",this._id),this._draggable.enable(),$(window).on("mousewheel",{self:this},this._onMouseScroll),$(window).on("DOMMouseScroll",{self:this},this._onMouseScroll))},disable:function(){this._draggable&&(console.log("[ColumnController] DISABLE DRAGGABLE:",this._id),this._draggable.disable(),$(window).off("mousewheel"),$(window).off("DOMMouseScroll"))},render:function(){if(this._draggable&&0!=this._totalImages)for(var t=this._draggable.y,e,i=this._imgHeight+this._imgMargin,s=-9,a=9,o=2,l=.5,n,g,r,h,_,d,u,m=this._totalImages,c=this._$images,b=Math.abs,p=m-1;p--;)d=c[p],e=t+i*p,n=e/500,g=s,r=a- -3*n,h=b(o-4*n),_=l-.15*b(n),h>20&&(h=20),.1>_&&(_=.1),u=""+g+"px "+r+"px "+h+"px 0px rgba(0,0,0,"+_+")",TweenLite.set(d,{boxShadow:u})}},this.appNS.ColumnController=t,t});
//# sourceMappingURL=./columnController.js.map